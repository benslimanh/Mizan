<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mizan Protocol — Whitepaper</title>
    <link rel="icon" href="./logo.ico" />
    <!-- Use the same site stylesheet -->
    <link rel="stylesheet" href="./styles.css" />
    <style>
      .whitepaper-container { max-width: 1000px; margin: 0 auto; padding: 1.5rem; }
      .pdf-frame { width: 100%; height: 85vh; border: 1px solid #e2e8f0; border-radius: 1rem; box-shadow: 0 10px 30px rgba(2,8,23,0.08); }
      .site-footer { border-top: 1px solid #e2e8f0; }
    </style>
  </head>
  <body class="min-h-dvh bg-slate-50 text-charcoal">
    <!-- Header Nav -->
    <header class="sticky top-0 z-20 border-b border-slate-200 bg-white">
      <div class="mx-auto flex max-w-6xl items-center justify-between px-4 py-4">
        <div class="flex items-center gap-2">
          <img src="./logo.ico" alt="Mizan Protocol" class="h-8 w-8" />
          <span class="text-sm font-semibold tracking-wide">Mizan Protocol</span>
        </div>
        <a href="./index.html" class="inline-flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-charcoal shadow-sm hover:bg-slate-50">
          <i data-lucide="arrow-left" class="h-4 w-4 text-brand-orange"></i>
          Back to Home
        </a>
      </div>
    </header>

    <!-- Main: PDF Viewer -->
    <main class="whitepaper-container">
      <section class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm">
        <iframe id="whitepaperFrame" title="Mizan Protocol Whitepaper" src="whitepaper.pdf" class="pdf-frame"></iframe>
      </section>

      <!-- Fallback download CTA -->
      <div class="mt-4 flex items-center justify-between gap-3">
        <div class="text-sm text-slate-500">If the preview does not load, download the PDF below.</div>
        <a id="downloadPdfButton" href="whitepaper.pdf" download class="inline-flex items-center justify-center gap-2 rounded-xl bg-brand-orange px-5 py-3 text-sm font-semibold text-white shadow-sm shadow-brand-orange/20 hover:bg-brand-orange/95">
          <i data-lucide="download" class="h-4 w-4"></i>
          Download PDF
        </a>
      </div>
    </main>

    <!-- Footer -->
    <footer class="site-footer bg-white">
      <div class="mx-auto max-w-6xl px-4 py-6 text-center text-sm text-slate-500">© 2025 Mizan Protocol</div>
    </footer>

    <script>
      // Initialize icons if Lucide is present
      try { if (window.lucide && typeof window.lucide.createIcons === 'function') { window.lucide.createIcons(); } } catch (_) {}

      // Robustly resolve available PDF path on the server
      (async () => {
        const frame = document.getElementById('whitepaperFrame');
        const download = document.getElementById('downloadPdfButton');
        const candidates = [
          'whitepaper.pdf',
          'Mizan_Trust_WhitePaper.pdf',
          'Mizan_Trust_WhitePaper (2).pdf'
        ];

        for (const path of candidates) {
          try {
            const res = await fetch(path, { method: 'HEAD' });
            if (res.ok) {
              frame.src = path;
              download.href = path;
              break;
            }
          } catch (_) { /* ignore and try next */ }
        }
      })();
    </script>
  </body>
  </html>
